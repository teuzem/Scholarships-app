import{a as m}from"./leaflet-src-BiS7fKvZ.js";import{r as o,R as p,a as T}from"./index-iacmIYsv.js";function b(u,n){const e=o.useRef(n);o.useEffect(function(){n!==e.current&&u.attributionControl!=null&&(e.current!=null&&u.attributionControl.removeAttribution(e.current),n!=null&&u.attributionControl.addAttribution(n)),e.current=n},[u,n])}const h=1;function N(u){return Object.freeze({__version:h,map:u})}function S(u,n){return Object.freeze({...u,...n})}const C=o.createContext(null);function g(){const u=o.use(C);if(u==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return u}function j(u){function n(e,t){const{instance:r,context:a}=u(e).current;o.useImperativeHandle(t,()=>r);const{children:c}=e;return c==null?null:p.createElement(C,{value:a},c)}return o.forwardRef(n)}function A(u){function n(e,t){const[r,a]=o.useState(!1),{instance:c}=u(e,a).current;o.useImperativeHandle(t,()=>c),o.useEffect(function(){r&&c.update()},[c,r,e.children]);const i=c._contentNode;return i?T.createPortal(e.children,i):null}return o.forwardRef(n)}function D(u){function n(e,t){const{instance:r}=u(e).current;return o.useImperativeHandle(t,()=>r),null}return o.forwardRef(n)}function I(u,n){const e=o.useRef(void 0);o.useEffect(function(){return n!=null&&u.instance.on(n),e.current=n,function(){e.current!=null&&u.instance.off(e.current),e.current=null}},[u,n])}function L(u,n){const e=u.pane??n.pane;return e?{...u,pane:e}:u}function _(u,n){return function(t,r){const a=g(),c=u(L(t,a),a);return b(a.map,t.attribution),I(c.current,t.eventHandlers),n(c.current,a,t,r),c}}function v(u,n,e){return Object.freeze({instance:u,context:n,container:e})}function E(u,n){return n==null?function(t,r){const a=o.useRef(void 0);return a.current||(a.current=u(t,r)),a}:function(t,r){const a=o.useRef(void 0);a.current||(a.current=u(t,r));const c=o.useRef(t),{instance:i}=a.current;return o.useEffect(function(){c.current!==t&&(n(i,t,c.current),c.current=t)},[i,t,n]),a}}function k(u,n){o.useEffect(function(){return(n.layerContainer??n.map).addLayer(u.instance),function(){var a;(a=n.layerContainer)==null||a.removeLayer(u.instance),n.map.removeLayer(u.instance)}},[n,u])}function w(u){return function(e){const t=g(),r=u(L(e,t),t);return b(t.map,e.attribution),I(r.current,e.eventHandlers),k(r.current,t),r}}function V(u,n){const e=E(u,n),t=w(e);return j(t)}function Z(u,n){const e=E(u),t=_(e,n);return A(t)}function B(u,n){const e=E(u,n),t=w(e);return D(t)}function G(u,n,e){const{opacity:t,zIndex:r}=n;t!=null&&t!==e.opacity&&u.setOpacity(t),r!=null&&r!==e.zIndex&&u.setZIndex(r)}function U({bounds:u,boundsOptions:n,center:e,children:t,className:r,id:a,placeholder:c,style:i,whenReady:l,zoom:s,...y},H){const[x]=o.useState({className:r,id:a,style:i}),[f,M]=o.useState(null),O=o.useRef(void 0);o.useImperativeHandle(H,()=>(f==null?void 0:f.map)??null,[f]);const z=o.useCallback(R=>{if(R!==null&&!O.current){const d=new m.Map(R,y);O.current=d,e!=null&&s!=null?d.setView(e,s):u!=null&&d.fitBounds(u,n),l!=null&&d.whenReady(l),M(N(d))}},[]);o.useEffect(()=>()=>{f==null||f.map.remove()},[f]);const P=f?p.createElement(C,{value:f},t):c??null;return p.createElement("div",{...x,ref:z},P)}const F=o.forwardRef(U),J=V(function({position:n,...e},t){const r=new m.Marker(n,e);return v(r,S(t,{overlayContainer:r}))},function(n,e,t){e.position!==t.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==t.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==t.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==t.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),K=Z(function(n,e){const t=new m.Popup(n,e.overlayContainer);return v(t,e)},function(n,e,{position:t},r){o.useEffect(function(){const{instance:c}=n;function i(s){s.popup===c&&(c.update(),r(!0))}function l(s){s.popup===c&&r(!1)}return e.map.on({popupopen:i,popupclose:l}),e.overlayContainer==null?(t!=null&&c.setLatLng(t),c.openOn(e.map)):e.overlayContainer.bindPopup(c),function(){var y;e.map.off({popupopen:i,popupclose:l}),(y=e.overlayContainer)==null||y.unbindPopup(),e.map.removeLayer(c)}},[n,e,r,t])}),Q=B(function({url:n,...e},t){const r=new m.TileLayer(n,L(e,t));return v(r,t)},function(n,e,t){G(n,e,t);const{url:r}=e;r!=null&&r!==t.url&&n.setUrl(r)});export{F as MapContainer,J as Marker,K as Popup,Q as TileLayer};
